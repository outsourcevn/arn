function getDate(n){return fn=n.split(" "),fn0=fn[0].split("/"),fn1=fn[1].split(":"),fn0[0]+"/"+fn0[1]+"/"+fn0[2]}function timkiemtaixe(n){var t;if(n.preventDefault(),document.getElementById("place_from").value==="")return t="Vui lòng nhập điểm đi",$("#place_from").popover({placement:"bottom",content:t}),$("#place_from").popover("show"),document.getElementById("place_from").focus(),!1;if(setTimeout(function(){$("#place_from").popover("hide")},600),document.getElementById("place_to").value==="")return t="Vui lòng nhập điểm tới",$("#place_to").popover({placement:"bottom",content:t}),$("#place_to").popover("show"),document.getElementById("place_to").focus(),!1;if(setTimeout(function(){$("#place_to").popover("hide")},600),document.getElementById("lat1").value===""&&document.getElementById("lng1").value==="")return t="Vui lòng nhập điểm tới",$("#place_from").popover({placement:"bottom",content:t}),$("#place_from").popover("show"),document.getElementById("place_from").focus(),!1;if(setTimeout(function(){$("#place_from").popover("hide")},600),document.getElementById("lat2").value===""&&document.getElementById("lng2").value==="")return t="Vui lòng nhập điểm tới",$("#place_to").popover({placement:"bottom",content:t}),$("#place_to").popover("show"),document.getElementById("place_to").focus(),!1;if(setTimeout(function(){$("#place_to").popover("hide")},600),document.getElementById("place_from").value===document.getElementById("place_to").value&&document.getElementById("place_from").value!==""&&document.getElementById("place_to").value!=="")return notifywarn("Vị trí điểm đi không thể trùng vị trí đến"),!1;if($("#date_go").val()==="")return t="Vui lòng nhập ngày đi",$("#date_go").popover({placement:"bottom",content:t}),$("#date_go").popover("show"),!1;if(setTimeout(function(){$("#date_go").popover("hide")},600),document.getElementById("type_go").value==="2"&&$("#date_to").val()==="")return t="Vui lòng nhập ngày đến",$("#date_to").popover({placement:"bottom",content:t}),$("#date_to").popover("show"),!1;var i=new google.maps.DirectionsRenderer,r=new google.maps.DirectionsService,u=new google.maps.LatLng(document.getElementById("lat1").value,document.getElementById("lng1").value),f=new google.maps.LatLng(document.getElementById("lat2").value,document.getElementById("lng2").value);r.route({origin:u,destination:f,travelMode:google.maps.TravelMode["DRIVING"]},function(n,t){if(t=="OK"){i.setDirections(n);var u=n.routes[0].legs[0].distance.text.replace(/km/g,"").replace(/m/g,"").replace(",","."),r="/Home/TimTaiXe";r+="?lat1="+document.getElementById("lat1").value+"&lng1="+document.getElementById("lng1").value+"&lat2="+document.getElementById("lat2").value+"&lng2="+document.getElementById("lng2").value;r+="&from="+document.getElementById("place_from").value+"&to="+document.getElementById("place_to").value;r+="&loaixe="+document.getElementById("Loaixe_socho").value+"&kc="+u;r+="&nhaxe="+document.getElementById("nhaxe").value;r+="&date_go="+document.getElementById("date_go").value;r+="&date_to="+document.getElementById("date_to").value;r+="&type_go="+document.getElementById("type_go").value;window.location.href=r}else window.alert("Vui lòng nhập lại địa chỉ "+t)})}function timkiemtaixe2(n){var t;if(n.preventDefault(),document.getElementById("place_from").value==="")return t="Vui lòng nhập điểm đi",$("#place_from").popover({placement:"bottom",content:t}),$("#place_from").popover("show"),document.getElementById("place_from").focus(),!1;if(setTimeout(function(){$("#place_from").popover("hide")},600),document.getElementById("place_to").value==="")return t="Vui lòng nhập điểm đến",$("#place_to").popover({placement:"bottom",content:t}),$("#place_to").popover("show"),document.getElementById("place_to").focus(),!1;if(setTimeout(function(){$("#place_to").popover("hide")},600),document.getElementById("lat1").value===""&&document.getElementById("lng1").value==="")return t="Vui lòng nhập điểm đi",$("#place_from").popover({placement:"bottom",content:t}),$("#place_from").popover("show"),document.getElementById("place_from").focus(),!1;if(setTimeout(function(){$("#place_from").popover("hide")},600),document.getElementById("lat2").value===""&&document.getElementById("lng2").value==="")return t="Vui lòng nhập điểm đến",$("#place_to").popover({placement:"bottom",content:t}),$("#place_to").popover("show"),document.getElementById("place_to").focus(),!1;if(setTimeout(function(){$("#place_to").popover("hide")},600),document.getElementById("place_from").value===document.getElementById("place_to").value&&document.getElementById("place_from").value!==""&&document.getElementById("place_to").value!=="")return notifywarn("Vị trí điểm đi không thể trùng vị trí đến"),!1;if($("#date_go").val()==="")return t="Vui lòng nhập ngày đi",$("#date_go").popover({placement:"bottom",content:t}),$("#date_go").popover("show"),!1;if(setTimeout(function(){$("#date_go").popover("hide")},600),document.getElementById("type_go").value==="2"&&$("#date_to").val()==="")return t="Vui lòng nhập ngày đến",$("#date_to").popover({placement:"bottom",content:t}),$("#date_to").popover("show"),!1;var i=new google.maps.DirectionsRenderer,r=new google.maps.DirectionsService,u=new google.maps.LatLng(document.getElementById("lat1").value,document.getElementById("lng1").value),f=new google.maps.LatLng(document.getElementById("lat2").value,document.getElementById("lng2").value);r.route({origin:u,destination:f,travelMode:google.maps.TravelMode["DRIVING"]},function(n,t){if(t=="OK"){i.setDirections(n);var u=n.routes[0].legs[0].distance.text.replace(/km/g,"").replace(/m/g,"").replace(",","."),r="/Home/TimTaiXe";r+="?lat1="+document.getElementById("lat1").value+"&lng1="+document.getElementById("lng1").value+"&lat2="+document.getElementById("lat2").value+"&lng2="+document.getElementById("lng2").value;r+="&from="+document.getElementById("place_from").value+"&to="+document.getElementById("place_to").value;r+="&loaixe="+document.getElementById("Loaixe_socho").value+"&kc="+u;r+="&date_go="+document.getElementById("date_go").value;r+="&date_to="+document.getElementById("date_to").value;r+="&type_go="+document.getElementById("type_go").value;window.location.href=r}else window.alert("Vui lòng nhập lại địa chỉ "+t)})}function swapValues(){var n=document.getElementById("place_from").value,t=document.getElementById("place_to").value,i=document.getElementById("lat1").value,r=document.getElementById("lng1").value,u=document.getElementById("lat2").value,f=document.getElementById("lng2").value;n!=""&&t!=""&&i!=""&&r!=""&&u!=""&&f!=""&&(document.getElementById("place_to").value=n,document.getElementById("place_from").value=t,document.getElementById("lat2").value=i,document.getElementById("lat1").value=u,document.getElementById("lng2").value=r,document.getElementById("lng1").value=f)}function booking(){var n=new FormData,r=document.getElementById("from_datetime").value,t,i;if(document.getElementById("car_from").value==""||document.getElementById("lon1").value==""){alert("Nhập điểm đi!");document.getElementById("car_from").focus();return}if(document.getElementById("car_to").value==""||document.getElementById("lon2").value==""){alert("Nhập điểm đến!");document.getElementById("car_to").focus();return}if(document.getElementById("car_type2").value==""){alert("Nhập loại xe!");document.getElementById("car_type2").focus();return}if(document.getElementById("car_hire_type").value==""){alert("Nhập hình thức đi!");document.getElementById("car_hire_type").focus();return}if(document.getElementById("car_size2").value==""){alert("Nhập số chỗ!");document.getElementById("car_size2").focus();return}if(document.getElementById("from_datetime").value==""){alert("Ngày giờ đi!");document.getElementById("from_datetime").focus();return}if(document.getElementById("to_datetime").value==""){alert("Ngày giờ về!");document.getElementById("to_datetime").focus();return}if(document.getElementById("name").value==""){alert("Nhập họ tên!");document.getElementById("name").focus();return}if(document.getElementById("phone").value==""){alert("Nhập số điện thoại!");document.getElementById("phone").focus();return}n.append("car_from",document.getElementById("car_from").value);n.append("car_to",document.getElementById("car_to").value);n.append("car_type",document.getElementById("car_type2").value);n.append("car_hire_type",document.getElementById("car_hire_type").value);n.append("car_size",document.getElementById("car_size2").value);n.append("from_datetime",document.getElementById("from_datetime").value);n.append("to_datetime",document.getElementById("to_datetime").value);n.append("lat1",document.getElementById("lat1").value);n.append("lon1",document.getElementById("lon1").value);n.append("lat2",document.getElementById("lat2").value);n.append("lon2",document.getElementById("lon2").value);n.append("name",document.getElementById("name").value);n.append("phone",document.getElementById("phone").value);document.getElementById("btnregister111").value="Đang đặt xe xin chờ....";document.getElementById("btnregister111").disabled=!0;t=new XMLHttpRequest;t.open("POST","/Home/bookingdatxe");t.send(n);i="";t.onreadystatechange=function(){t.readyState==4&&t.status==200&&(t.responseText=="1"?alert("Bạn đã đặt xe thành công! Tài xế sẽ liên hệ lại sớm nhất với bạn!"):alert("Chương trình đang cập nhật, xin quay lại sau!"),document.getElementById("btnregister111").value="XÁC NHẬN",document.getElementById("btnregister111").disabled=!1)}}function getdate_go(){console.log(getDate($("#date_go").val()))}function func_datxenhanh(n,t,i){if(i.preventDefault(),document.getElementById("lat1").value===""&&document.getElementById("lng1").value==="")return alert("Vui lòng nhập điểm đi."),!1;if(document.getElementById("lat2").value===""&&document.getElementById("lng2").value==="")return alert("Vui lòng nhập điểm đến."),!1;if(n){var r=document.getElementById("place_from").value,u=document.getElementById("place_to").value,f=document.getElementById("kc_duongdi").value,e=document.getElementById("type_go").value,o=document.getElementById("date_go").value,s=document.getElementById("date_to").value;$.get("/Home/getModaldatxenhanh?driver_id="+n+"&diemdi="+r+"&diemden="+u+"&kcc="+f+"&type_go="+e+"&date_go="+o+"&date_to="+s+"&carsize="+t,function(n){$("#modal-7 .modal-body").empty().html(n);$("#modal-7").modal("show",{backdrop:"static",keyboard:!1})})}}function saveBookingToDriver(){document.getElementById("lon_from").value=document.getElementById("lng1").value;document.getElementById("lat_from").value=document.getElementById("lat1").value;document.getElementById("lon_to").value=document.getElementById("lng2").value;document.getElementById("lat_to").value=document.getElementById("lat2").value;document.getElementById("from_place").value=document.getElementById("place_from").value;document.getElementById("to_place").value=document.getElementById("place_to").value;document.getElementById("distance").value=document.getElementById("kc_duongdi").value;if(document.getElementById("customer_name").value==="")return alert("Vui lòng nhập họ tên khách hàng."),document.getElementById("customer_name").focus(),!1;if(document.getElementById("customer_phone").value==="")return alert("Vui lòng nhập số điện thoại khách hàng."),document.getElementById("customer_phone").focus(),!1;if(document.getElementById("from_date").value==="")return alert("Vui lòng nhập ngày đến."),document.getElementById("from_date").focus(),!1;if(document.getElementById("to_date").value==="")return alert("Vui lòng nhập ngày đi."),document.getElementById("to_date").focus(),!1;if(document.getElementById("email_cus").value==="")return alert("Vui lòng nhập email."),document.getElementById("email_cus").focus(),!1;if(document.getElementById("from_date").value>document.getElementById("to_date").value)return alert("Ngày đi phải sau ngày đến"),document.getElementById("from_date").focus(),!1;document.getElementById("btn_bookingtodriver").innerHTML="Đang đặt xe...";document.getElementById("btn_bookingtodriver").disabled=!0;$.ajax({type:"POST",url:"/Home/saveBookingToDriver",data:$("#form_dat_thue_xe").serialize(),success:function(n){n==1&&$("#modal-7 .modal-body").empty().html("<p>Cám ơn đã đặt xe tại hệ thống thuexevn. Vui lòng chờ trong ít phút để chúng tôi xử lý yêu cầu của bạn.<\/p>")}})}$(document).ready(function(){var u,f,i,r,t,n;$("#getmaplocation").tooltip({placement:"left",title:"Lấy vị trí hiện tại"});$("#movemaplocation").tooltip({placement:"left",title:"Hoán vị địa điểm"});n={bounds:!0,country:null,map:"#map-canvas",details:!1,detailsAttribute:"name",detailsScope:null,autoselect:!0,location:!1,mapOptions:{zoom:14,scrollwheel:!1,mapTypeId:"roadmap"},markerOptions:{draggable:!1},maxZoom:16,types:[],blur:!1,geocodeAfterResult:!1,restoreValueAfterBlur:!1};$("#place_from").geocomplete(n).bind("geocode:result",function(n,t){$("#lat1").val(t.geometry.location.lat());$("#lng1").val(t.geometry.location.lng())}).bind("geocode:error",function(n,t){$.log("ERROR: "+t)}).bind("geocode:multiple",function(n,t){$.log("Multiple: "+t.length+" results found")});$("#place_to").geocomplete(n).bind("geocode:result",function(n,t){$("#lat2").val(t.geometry.location.lat());$("#lng2").val(t.geometry.location.lng())}).bind("geocode:error",function(n,t){$.log("ERROR: "+t)}).bind("geocode:multiple",function(n,t){$.log("Multiple: "+t.length+" results found")});u=new google.maps.Map(document.getElementById("map-canvas"),{center:{lat:-34.397,lng:150.644},zoom:6});f=new google.maps.InfoWindow({map:u});$("#getmaplocation").on("click",function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){var t={lat:n.coords.latitude,lng:n.coords.longitude};$("#lat1").val(t.lat);$("#lng1").val(t.lng);$.ajax({url:"http://maps.googleapis.com/maps/api/geocode/json?latlng="+t.lat+","+t.lng+"&sensor=false",cache:!1}).done(function(n){$("#place_from").val(n.results[0].formatted_address)})},function(){console.log("Browser doesn't support Geolocation")},function(n){n.message.indexOf("Only secure origins are allowed")==0}):console.log("Browser doesn't support Geolocation")});if($("#datetimepicker").length&&($("#datetimepicker").datetimepicker({dayOfWeekStart:1,lang:"en",disabledDates:["1986/01/08","1986/01/09","1986/01/10"],startDate:"@DateTime.Now.Year/@DateTime.Now.Month/@DateTime.Now.Date"}),i=new Date,r=i.toLocaleString(),$("#datetimepicker").datetimepicker({value:r,step:10})),$.ajax({url:"/Api/getListCarType",cache:!1}).done(function(n){for(var u='{"news":'+n+"}",i=$.parseJSON(u),r,t=0;t<i.news.length;t++)i.news[t]&&(r=i.news[t].name,$("#car_type").append("<option value='"+r+"'>"+r+"<\/option>"))}),$.ajax({url:"/Api/getCarSize",cache:!1}).done(function(n){for(var u='{"news":'+n+"}",i=$.parseJSON(u),r,t=0;t<i.news.length;t++)i.news[t]&&(r=i.news[t].name,$("#car_size").append("<option value='"+r+"'>"+r+"<\/option>"))}),$(".counter").length&&$(".counter").counterUp({delay:10,time:1e3}),$("#booking").length){$("#booking").dataTable({bFilter:!1,scrollY:"50vh",scrollCollapse:!0,paging:!1,bLengthChange:!1,bInfo:!1,bAutoWidth:!0,bSort:!0});$("#booking").on("click",".bdx-x",function(){$(this).remove()})}if($(".show_pn").length)$(".show_pn").on("click",function(n){window.location.href="/Home/Taixe";n.preventDefault()});$.ajax({url:"/Home/getCarSize",cache:!1}).done(function(n){$("#Loaixe_socho").append(n)});$(".carousel").length&&$(".carousel").carousel({interval:2e3});$("#from_datetime").length&&($("#from_datetime").datetimepicker({dayOfWeekStart:1,lang:"en",disabledDates:["1986/01/08","1986/01/09","1986/01/10"],startDate:"@DateTime.Now.Year/@DateTime.Now.Month/@DateTime.Now.Date"}),i=new Date,r=i.toLocaleString(),$("#from_datetime").datetimepicker({value:r,step:10}));$("#to_datetime").length&&$("#to_datetime").datetimepicker({dayOfWeekStart:1,lang:"en",disabledDates:["1986/01/08","1986/01/09","1986/01/10"],startDate:"@DateTime.Now.Year/@DateTime.Now.Month/@DateTime.Now.Date"});$("#date_go").length&&$("#date_to").length&&jQuery(function(){$("#date_go").datetimepicker({dayOfWeekStart:1,lang:"vi",disabledDates:["1986/01/08","1986/01/09","1986/01/10"],format:"d/m/Y H:i",mask:!1,step:5,minDate:0,onShow:function(){this.setOptions({maxDate:$("#date_to").val()?getDate($("#date_to").val()):!1,formatDate:"d/m/Y"})},timepicker:!0});$("#date_to").datetimepicker({dayOfWeekStart:1,lang:"vi",disabledDates:["1986/01/08","1986/01/09","1986/01/10"],format:"d/m/Y H:i",mask:!1,step:5,onShow:function(){this.setOptions({minDate:$("#date_go").val()?getDate($("#date_go").val()):!1,formatDate:"d/m/Y"})},timepicker:!0})});$("#owl-demo").length&&(t=$("#owl-demo"),t.owlCarousel({autoPlay:3e3,pagination:!0,items:1,itemsDesktop:[1e3,1],itemsDesktopSmall:[900,1],itemsTablet:[600,1],itemsMobile:[480,1]}),$(".next").click(function(){t.trigger("owl.next")}),$(".prev").click(function(){t.trigger("owl.prev")}),$(".play").click(function(){t.trigger("owl.play",1e3)}),$(".stop").click(function(){t.trigger("owl.stop")}));$.ajax({url:"/Api/getListCarType",cache:!1}).done(function(n){var u='{"news":'+n+"}",i=$.parseJSON(u),t,r;for($("#car_type2").html(""),t=0;t<i.news.length;t++)i.news[t]&&(r=i.news[t].name,$("#car_type2").append("<option value='"+r+"'>"+r+"<\/option>"))});$.ajax({url:"/Api/getCarHireType",cache:!1}).done(function(n){var u='{"news":'+n+"}",i=$.parseJSON(u),t,r;for($("#car_hire_type").html(""),t=0;t<i.news.length;t++)i.news[t]&&(r=i.news[t].name,$("#car_hire_type").append("<option value='"+r+"'>"+r+"<\/option>"))});$.ajax({url:"/Api/getCarSize",cache:!1}).done(function(n){var u='{"news":'+n+"}",i=$.parseJSON(u),t,r;for($("#car_size2").html(""),t=0;t<i.news.length;t++)i.news[t]&&(r=i.news[t].name,$("#car_size2").append("<option value='"+r+"'>"+r+"<\/option>"))});n={map:".map_canvas"};$("#car_from").length&&$("#car_from").geocomplete(n).bind("geocode:result",function(n,t){$("#lon1").val(t.geometry.location.lng());$("#lat1").val(t.geometry.location.lat())}).bind("geocode:error",function(n,t){$.log("ERROR: "+t)}).bind("geocode:multiple",function(n,t){$.log("Multiple: "+t.length+" results found")});$("#car_to").length&&$("#car_to").geocomplete(n).bind("geocode:result",function(n,t){$("#lon2").val(t.geometry.location.lng());$("#lat2").val(t.geometry.location.lat())}).bind("geocode:error",function(n,t){$.log("ERROR: "+t)}).bind("geocode:multiple",function(n,t){$.log("Multiple: "+t.length+" results found")})})